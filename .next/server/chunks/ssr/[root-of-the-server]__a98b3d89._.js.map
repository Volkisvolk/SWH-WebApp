{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 13, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Volka/Documents/Sketching/WebApp/beeapp/src/app/dashboard/page.tsx"],"sourcesContent":["'use client'\r\nimport { useEffect, useState } from 'react'\r\n\r\ntype User = { id:number; role:'admin'|'user'; points:number; tagId:string; name?:string }\r\n\r\ntype Assignment = { id:number; taskId:number; userId:number; status:string; taskTitle?:string; taskPoints?:number; description?:string; tag?:string }\r\n\r\nexport default function DashboardPage() {\r\n  const [user, setUser] = useState<User | null>(null)\r\n  const [assignments, setAssignments] = useState<Assignment[]>([])\r\n  const [redeemPoints, setRedeemPoints] = useState<number|''>('')\r\n\r\n  useEffect(() => {\r\n    const load = async () => {\r\n      const r = await fetch('/api/me')\r\n      const d = await r.json()\r\n      if (d.user?.role === 'admin') {\r\n        window.location.href = '/admin/workspace'\r\n        return\r\n      }\r\n      setUser(d.user || null)\r\n      if (d.user) {\r\n        const r2 = await fetch('/api/user/assignments').catch(()=>null)\r\n        const d2 = r2 ? await r2.json() : { assignments: [] }\r\n        setAssignments(d2.assignments || [])\r\n      }\r\n    }\r\n    load()\r\n  }, [])\r\n\r\n  if (!user) return <div className=\"container\">Bitte einloggen…</div>\r\n\r\n  return (\r\n    <div className=\"container space-y-5\">\r\n      <div className=\"card p-5\">\r\n        <h1 className=\"text-xl font-semibold\">Hallo {user.name || user.tagId}</h1>\r\n        <div className=\"mt-2\">Punkte: <span className=\"font-semibold\">{user.points}</span></div>\r\n        <form onSubmit={async(e)=>{e.preventDefault(); if(!redeemPoints) return; await fetch('/api/redeem',{method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ points: redeemPoints })}); location.reload()}} className=\"mt-3 flex items-end gap-2\">\r\n          <div>\r\n            <label className=\"block text-sm\">Punkte einlösen</label>\r\n            <input type=\"number\" className=\"input w-32\" value={redeemPoints} onChange={e=>setRedeemPoints(parseInt(e.target.value||'0'))} />\r\n          </div>\r\n          <button className=\"btn btn-primary\">Einlösen</button>\r\n        </form>\r\n      </div>\r\n\r\n      <div className=\"card p-5\">\r\n        <h2 className=\"text-lg font-semibold\">Deine Aufgaben</h2>\r\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-3 mt-3\">\r\n          {assignments.filter(a=>a.status==='assigned' || a.status==='pending').map(a => (\r\n            <div key={a.id} className=\"border rounded p-3\">\r\n              <div className=\"font-medium flex items-center justify-between\">\r\n                <span>{a.taskTitle || `Task #${a.taskId}`}</span>\r\n                {a.tag && <span className=\"badge\">{a.tag}</span>}\r\n              </div>\r\n              {a.description && <div className=\"text-sm mt-1\">{a.description}</div>}\r\n              <div className=\"text-sm text-gray-600 mt-2\">{a.taskPoints ?? 0} Punkte</div>\r\n              <div className=\"mt-3\">\r\n                {a.status === 'assigned' ? (\r\n                  <button onClick={async()=>{await fetch(`/api/assignments/${a.id}`,{method:'PATCH', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ action:'complete' })}); location.reload()}} className=\"btn btn-primary w-full\">Abschließen</button>\r\n                ) : (\r\n                  <span className=\"text-sm text-gray-600\">Status: {a.status}</span>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"card p-5\">\r\n        <h2 className=\"text-lg font-semibold\">Historie</h2>\r\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-3 mt-3\">\r\n          {assignments.filter(a=>a.status==='approved' || a.status==='rejected').map(a => (\r\n            <div key={a.id} className=\"border rounded p-3\">\r\n              <div className=\"font-medium flex items-center justify-between\">\r\n                <span>{a.taskTitle || `Task #${a.taskId}`}</span>\r\n                {a.tag && <span className=\"badge\">{a.tag}</span>}\r\n              </div>\r\n              {a.description && <div className=\"text-sm mt-1\">{a.description}</div>}\r\n              <div className=\"text-sm text-gray-600 mt-2\">{a.taskPoints ?? 0} Punkte</div>\r\n              <div className=\"mt-2 text-sm\">Status: {a.status}</div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 363, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Volka/Documents/Sketching/WebApp/beeapp/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 384, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Volka/Documents/Sketching/WebApp/beeapp/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 391, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Volka/Documents/Sketching/WebApp/beeapp/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0],"debugId":null}}]
}